<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Gettin Giphy</title>
    <style type="text/css">
        button,
        div,
        form,
        input {
            margin: 10px;
        }
    </style>

</head>

<body>
    <div id="giphys-view">This is where the buttons will be</div>
    <div id="images-view"></div>

    <!-- <form id="movie-form">
          <label for="movie-input">Add a Movie, Yo!</label>
          <input type="text" id="movie-input"><br>
    
          Button triggers new movie to be added -->
    <!-- <input id="add-movie" type="submit" value="Add a Movie, Yo!">
        </form> -->



    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">

        var giphys = ["Cats", "Dogs", "Ducks", "Goats"];
        $(document).on('click', ".giphy", function () {
            var currentsearchTerm = $(this).attr("data-name");
            renderImage(currentsearchTerm);
        })
        function renderButtons() {
            $("#giphys-view").empty();
            for (var i = 0; i < giphys.length; i++) {
                var a = $("<button>");
                a.addClass("giphy");
                a.attr("data-name", giphys[i]);
                a.text(giphys[i]);
                $("#giphys-view").append(a);
            }
        };
        renderButtons();
        console.log(renderButtons());




        function renderImage(queryTerm) {
            var queryURL = "https://api.giphy.com/v1/gifs/search?q=" + queryTerm + "&api_key=N6gs90gKX9P7ojEA7ntmVRazPb8AYr1u&limit=5"
            $.ajax({
                url: queryURL,
                method: "GET"
            }).done(function (data, err) {
                $('#images-view').empty();

                //For loop here
                for
                (var i = 0; i < data.data.length; i++) {
                    var gifImage = data.data[i].images.fixed_height.url;
                    var stillImage = data.data[i].images.fixed_height_still.url;
                    var rating = data.data[i].rating;

                    var newHtml = `
                <div>
                <img src="${stillImage}" data-state="still" data-gif="${gifImage}" data-still="${stillImage}" alt="giphy">
                <p>Rating: ${rating}</p>
                </div>
                `;
                    $("#images-view").append(newHtml);
                };
                //Here we add all our imagers to the DOM
                //We need to ensure the images div we are working with is emptied
                //THen we need to iterate over the images array returned and place the correct data into an html template to be 
                //appended to the DOM
            });
        }

        // //Take the items from the array and create an image within HTML.
        // //make a loop that appends a button for each string in the array.
        // //User clicks the button, page grabs 10 static Gifs from the Giphy api and places them on page.
        // //When the user clicks a still giphy image, the gif animates. When clicked again, it will stop playing. 
        // $(".gif").on("click", function () {
        //     var state = $(this).attr("data-state");
        //     if (state === "still") {
        //         $(this).attr("src", $(this).attr("data-animate"));
        //         $(this).attr("data-state", "animate");
        //     } else {
        //         $(this).attr("src", $(this).attr("data-still"));
        //         $(this).attr("data-state", "still");
        //     }
        // });
//Under every gif, display its rating (PG, G, so on). This data is provided by the GIPHY api
//Add a form to your page takes the value from a user input box and adds it into your topics array. Then make a function call that takes each topic in the array remakes the buttons on the page. 


    </script>
</body>

</html>